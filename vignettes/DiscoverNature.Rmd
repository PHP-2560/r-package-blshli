---
title: "Performing literature searches with DiscoverNature"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Performing literature searches with discover nature}
  %\VignetteEngine{knitr::rmarkdown}
  \usepackage[utf8]{inputenc}
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```
## Introduction
Nature is one of the world's leading scientific journal publication platforms. It was founded by Norman Lockyer and generously endorsed by Daniel and Alexander Macmillan in 1869. The journal originated in Britain and had its first article published on November 4th 1869. According to Wikipedia, one of the reasons why this journal thrived among other existing journals of its kind is likely due to its liberal values. As of 2018, Nature had an impact factor (based on citations and credibility) of 43.070 which is considered very prestigious and reputtable.

## Navigating Nature Website from the direct webpage
The Nature website's main page consists of different sesctions including: the featured contents, news & comment, Latest Reviews and Analysis, Latestest research, collections, trending altmetric and nature careers. Each of these sections provides viewers with latest content publications and can be browsed by clicking on the specific hyperlink of interest.

## Our Goal
For the purpose of this project, my group was interested in scraping information on the Latest research page from Nature. Our goal was to explore what kinds of information have been published in Nature journal since its forthcoming. We were also interested in exploring how many articles were published by decades and what keywords, papers and authors were popular. We further created funtions that could extract  articles by keyword, paper and subject; these categories could be further filtered using parameters such as: ***article type***, ***publication year***, ***date range*** and ***relevance***.

## Getting Started

To use this package, you will need to first run the following commands:

```{r message=FALSE, warning=FALSE}
library(devtools)
#install_github("PHP-2560/r-package-blshli")
library(DiscoverNature)
```
This code should provide access to the database with information to perform a basic search. There are three main categories that can be searched using this database. These are: **explore_keyword( )**, **explore_subject( )****/****list.topics( )**, and **explore_paper( )**. Other necessary packages needed to successfully run this package are:

```{r }
#library(rvest)
#library(devtools)
#library(lubridate)
#library(dplyr)
#library(utils)
#library(stringr)
#library(purrr)
#library(xml2)
#library(magrittr)
```
Specfic use of each package can be found in the NAMESPACE file

## Using explore_keyword
One of the options to search the database is through keywords. By default, only the keyword argument is required like in the code below
```{r }
paper.results <- explore_keyword('cells', u.year = 2018)
paper.results 
```

This queries the nature.com website for a keyword(s) of interest, in this case ***cells***. The function returns a tibble with publications found in search. 

### Example:
The keyword search query can be modified by article type, publication year or date range, sort preference and page range as shown in the examples below:
```{r }
article_type <- explore_keyword('cells', article.types = 'review') 
article_type
```
This shows article types to return: *research*, *reviews*, *news*, *comments-and-opinion*, *news-and-views*, *amendments-and-corrections*, *correspondence*, *editorial*, *special-features*, *advertorial*, *books-and-arts*, *protocols*, *multimedia*, *research-highlights*.
```{r }
date_range <- explore_keyword('FOXO3',article.types = 'review', publication.range = '2015-2019')
date_range
```
This restricts results returned to predefined date range:
*today*, *last_7_days*, *last_30_days*, *last_year*, *last_2_years*, *last_5_years*. Publications range and dates can also be specified using the **l.year** and **u.year** arguments as shown in the following commands. **NOTE**: l.year and u.year should not be used when publication.range != NULL
```{r }
papersafter2015 <- explore_keyword('cells', article.types = 'review', l.year= 2015)
papersafter2015
```
Specifies the lower bound of date range. In other words, it includes articles before a specific date/defaults to earliest year.
```{r }
papersbefore2015 <- explore_keyword('cells', article.types = 'review', u.year= 2015)
papersbefore2015
```
Specifies the upper bound of date range. In other words, includes articles after a specific date/defaults to current year. 
```{r }
sort_by <- explore_keyword('cells', article.types = 'review', u.year= 2015, sort.method = 'relevance')
sort_by
```
Sorts results by *relevance*, *date_desc*, *date_asc*.

```{r }
page_range <- explore_keyword('cells', article.types = 'review', u.year= 2015, sort.method = 'relevance', page.range = 1:10)
page_range
```
This modifier allows for multiple pages of results to be returned. By default, only the first page of results from query are returned specifying range from n:m. When page.range = NULL, only the first page of results are returned ***generally a page query will return ~50 papers***


## Using explore_paper
This functions provides an easy way for the user to open an article of interest in a browser without having to manually identify url of paper. 

To do this, the user will need to input both a title and resulting tibble from a *explore_keyword* or *explore_subject* search as shown in the code.

```{r }
#explore_paper(.title = 'Arginine methylation', res = paper.results)

```

As an alternative, a url can be supplied directly using the url argument
```{r }
#explore_paper(url = 'https://www.nature.com/articles/s41590-018-0222-z')

```


## Using explore_subject
A third option is to search by subject. Subjects are topics curated by nature 

***list.topics()***.  provides the user with an up to date list of available topics to choose from. 

```{r }
topics <- list.topics()
head(topics)
```

Papers in each subject can be searched for using the **explore_subject()** function
```{r }
paper_by_sub <- explore_subject("Biochemistry")
paper_by_sub 
```

This queries the nature.com website for a subject of interest, in this case *Biochemistry*. The function returns a tibble with publications found in search. The search query can be modified by article type, publication year or date range, relevance and results page.

### Example:
The subject search query can be modified by article type, publication year or date range, sort preference and page range as shown in the examples below:
```{r }
article_type <- explore_subject('Biochemistry', article.types = 'review') 
article_type
```
This shows article types to return: *research*, *reviews*, *news*, *comments-and-opinion*, *news-and-views*, *amendments-and-corrections*, *correspondence*, *editorial*, *special-features*, *advertorial*, *books-and-arts*, *protocols*, *multimedia*, *research-highlights*.
```{r }
date_range <- explore_subject('Biochemistry', article.types = 'review', publication.range = '2015-2019')
date_range
```
This restricts results returned to predefined date range:
*today*, *last_7_days*, *last_30_days*, *last_year*, *last_2_years*, *last_5_years*. Publications range and dates can also be specified using the **l.year** and **u.year** arguments as shown in the following commands. **NOTE**: l.year and u.year should not be used when publication.range != NULL
```{r }
papersafter2015 <- explore_subject('Biochemistry', article.types = 'review', l.year= 2015)
papersafter2015
```
Specifies the lower bound of date range. In other words, it includes articles before a specific date/defaults to earliest year.
```{r }
papersbefore2015 <- explore_subject('Biochemistry', article.types = 'review', u.year= 2015)
papersbefore2015
```
Specifies the upper bound of date range. In other words, includes articles after a specific date/defaults to current year. 
```{r }
sort_by <- explore_subject('Biochemistry', article.types = 'review', u.year= 2015, sort.method = 'relevance')
sort_by
```
Sorts results by *relevance*, *date_desc*, *date_asc*.

```{r }
#page_range <- explore_subject('Biochemistry', article.types = 'review', u.year= 2015, sort.method = 'relevance', page.range = 1:10)
#page_range
```
This modifier allows for multiple pages of results to be returned. By default, only the first page of results from query are returned specifying range from n:m. When page.range = NULL, only the first page of results are returned ***generally a page query will return ~50 papers***
